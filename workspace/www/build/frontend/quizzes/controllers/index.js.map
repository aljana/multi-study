{"version":3,"file":"frontend/quizzes/controllers/index.js","names":[],"mappings":"","sources":["frontend/quizzes/controllers/index.js"],"sourcesContent":["class IndexController {\n  constructor($scope, quizPagination, quizService, socketService) {\n    this.$scope = $scope;\n\n    this.quizService = quizService;\n    this.quizPagination = quizPagination;\n\n    socketService.on('quiz:public', (message) => {\n      var i;\n      message = JSON.parse(message);\n      //console.log(message);\n      if (message.action === 'change-state') {\n        if (message.state === 'created') {\n          quizService.get({ quizId: message.pk }, (data) => {\n            this.quizPagination.results.push(data);\n          });\n        } else {\n          for (i = 0; i < this.quizPagination.results.length; i++) {\n            if (this.quizPagination.results[i].pk === message.pk) {\n              this.quizPagination.results[i].state = message.state;\n              if (message.state === 'deleted') {\n                break;\n              }\n            }\n          }\n          if (message.state === 'deleted') {\n            this.quizPagination.results.splice(i, 1);\n          }\n        }\n      }\n    });\n  }\n\n  participate(pk) {\n    console.log('tset');\n    this.quizService.participate({ quizId: pk });\n  }\n}\n\nIndexController.$inject = ['$scope', 'quizPagination', 'QuizService', 'SocketService'];\n\nexport default IndexController;\n"],"sourceRoot":"/source/"}